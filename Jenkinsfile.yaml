pipeline:
  agent:
   any:
  tools:
    nodejs: "NodeJS"
  branch: "main"
  stages:
    - stage: "Log Jenkins Node and Git versions"
      steps:
        - sh "node -v"
        - sh "git --version"  
    - stage: "Downloading repo and starting app"
      steps:
        - git "https://github.com/Makii117/black-steel-api.git"
    - stage: "Installing dependencies"
      steps:
        - sh "npm install"
        - sh "npm install -g mocha" 
        
    - stage: "Running tests"
      steps:
        - sh "npm run start"
        - sh "npm test"
    - stage: "Final Jenkins YAML Pipeline Stage"
      steps:
        - sh "echo 'Jenkins YAML Pipeline Complete'"
